<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TravelWise - Find Your Travel Buddy</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Free HTML Templates" name="keywords" />
    <meta content="Free HTML Templates" name="description" />

    <!-- Favicon -->
    <link href="static\img\logo.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />

    <!-- Libraries Stylesheet -->
    <link
      rel="stylesheet"
      type="text/css"
      href="static\css\Libry\owlcarousel\assets\owl.carousel.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="static\css\Libry\tempusdominus\css\tempusdominus-bootstrap-4.min.css"
    />

    <!-- Customized Bootstrap Stylesheet -->
    <link rel="stylesheet" type="text/css" href="static\css\css\style.css" />
    <link rel="stylesheet" type="text/css" href="static\css\css\style1.css" />

    <style>
      .box {
        width: 75vw;
        margin-top: 600px;
        margin-left: 11.5%;
        padding-top: 50px;
      }
      button{
  background-color: #5f8f25;
  border-color: #5f8f25;
  width: 100px;          
  height: 40px;
  transition: background-color 0.3s;
  font-size: 14px;
}
 button:hover{
  background-color: #76a938;
}
    </style>
  </head>

  <body>
    <!-- Topbar Start -->
    <div class="container-fluid bg-light pt-3 d-none d-lg-block">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 text-center text-lg-left mb-2 mb-lg-0">
            <div class="d-inline-flex align-items-center">
              <p>
                <i class="fa fa-envelope mr-2"></i
                >travelwisesrilanka@contact.com
              </p>
              <p class="text-body px-3">|</p>
              <p><i class="fa fa-phone-alt mr-2"></i>(+94) 77 12 34 567</p>
            </div>
          </div>
          <div class="col-lg-6 text-center text-lg-right">
            <div class="d-inline-flex align-items-center">
              <a class="text-primary px-3" href="">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a class="text-primary px-3" href="">
                <i class="fab fa-twitter"></i>
              </a>
              <a class="text-primary px-3" href="">
                <i class="fab fa-linkedin-in"></i>
              </a>
              <a class="text-primary px-3" href="">
                <i class="fab fa-instagram"></i>
              </a>
              <a class="text-primary pl-3" href="">
                <i class="fab fa-youtube"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <div class="container-fluid position-relative nav-bar p-0">
      <div
        class="container-lg position-relative p-0 px-lg-3"
        style="z-index: 9"
      >
        <nav
          class="navbar navbar-expand-lg bg-light navbar-light shadow-lg py-3 py-lg-0 pl-3 pl-lg-5"
        >
          <a href="" class="navbar-brand">
            <h1 class="m-0 text-primary">
              <span class="text-dark">Tavel</span>Wise
            </h1>
          </a>
          <button
            type="button"
            class="navbar-toggler"
            data-toggle="collapse"
            data-target="#navbarCollapse"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div
            class="collapse navbar-collapse justify-content-between px-3"
            id="navbarCollapse"
          >
            <div class="navbar-nav ml-auto py-0">
              <a href="index.html" class="nav-item nav-link active">Home</a>
              <a href="about.html" class="nav-item nav-link">About</a>
              
              <div class="nav-item dropdown">
                <a
                  href="#"
                  class="nav-link dropdown-toggle"
                  data-toggle="dropdown"
                  >Pages</a
                >
                <div class="dropdown-menu border-0 rounded-0 m-0">
                  <a href="blog.html" class="dropdown-item">Blog Grid</a>
                  <a href="single.html" class="dropdown-item">Blog Detail</a>
                  <a href="destination.html" class="dropdown-item"
                    >Destination</a
                  >
                  <a href="guide.html" class="dropdown-item">Travel Guides</a>
                  <a href="testimonial.html" class="dropdown-item"
                    >Testimonial</a
                  >
                </div>
              </div>
              <a href="contact.html" class="nav-item nav-link">Contact</a>
              <a href="home.php" class="nav-item nav-link">My Profile</a>
              <a onclick="location.href='/logout'" class="nav-item nav-link">Sign Out</a>
            </div>
          </div>
        </nav>
      </div>
    </div>
    <!-- Navbar End -->

      <container class="inputform">
    <form id="inputform">
      <div class="form-group" >
        <label for="exampleFormControlInput1">Age</label>
        <input
          type="text"
          class="age"
          id="age"
          placeholder="your age (optional)"
          
        />
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect1">Relationship Status</label>
        <input type="text"
        class="ms"
        id="ms"
        placeholder="Describe your relationship status (optional)"
        >
      </input>
      </div>
      <div class="form-group">
        <label for="exampleFormControlSelect2">Travel Interest and Hobbies</label>
        <input type="text"
        class="trvl"
        id="trvl"
        placeholder="please describe your travel interests and hobbies" 
        required="required"
        >
        
      </input>
      </div>
      <div class="form-group">
        <label for="exampleFormControlTextarea1">Little About You</label>
        <textarea
        type="text"
        class="myself"
        id="myself"
        placeholder="brief paragraph about you" 
          rows="3"
          required="required"
        ></textarea>
      </br>
        <button type="submit">Submit</button>
      </div>
    </form>
  </container>
  
    <div class="box">
      <h2 style="text-align: center;">Your Recommendations!</h2>
  <div id="profiles-list" >></div>
    </div>





    <script>
      document
        .getElementById("inputform")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const age = document.getElementById("age").value;
          const ms = document.getElementById("ms").value;
          const trvl = document.getElementById("trvl").value;
          const myself = document.getElementById("myself").value;

          const data = {
            age: age,
            ms: ms,
            trvl: trvl,
            myself: myself,
          };

          fetch("/predict", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          })
            .then((response) => response.json())
            .then((data) => {
              const profilesList = document.getElementById("profiles-list");
              profilesList.innerHTML = ""; 
              
              // Ensure that data.profiles exists and is an array before proceeding
              if (data.profiles && Array.isArray(data.profiles)) {
                
                data.profiles.forEach((profile) => {
                  
                  const profileDiv = document.createElement("div");
                  profileDiv.className = "p-2 lg:w-1/3 md:w-1/2 w-full";
                  profileDiv.innerHTML = `
                  <div class="h-full flex items-center border-gray-200 border p-4 rounded-lg"> 
                        <img alt="team" class="w-16 h-16 bg-gray-100 object-cover object-center flex-shrink-0 rounded-full mr-4" src="${profile.image || "/static/img/resizedImage.png"}"

                        }">
                        <div class="flex-grow">
                            <h2 class="text-gray-900 title-font font-medium">${
                              profile.name
                            }</h2>
                            <p class="text-gray-500">Age: ${profile.age}</p>
                            <p>About: ${profile.aboutme}</p>
                            <p>Email: ${profile.email}</p>
                            <button class="view-profile-btn">view profile</button>
                        </div>
                    </div>
                              `;
                  profilesList.appendChild(profileDiv);
                  profileDiv.querySelector(".view-profile-btn").addEventListener("click", function() {
                  goToProfile(profile);
                   });
                });alert('Done!')
              } else {
                console.error("Unexpected data format received:", data);
                
              }
            });
        });
    </script>

    <script>
      function goToProfile(profile) {
        // Convert profile to JSON string
        var jsonString = JSON.stringify(profile);
    
        // URL-encode the JSON string
        var encodedProfile = encodeURIComponent(jsonString);
    
        // Redirect to the partner route with the encoded profile as a parameter
        location.href = '/partner?profile=' + encodedProfile;
      }
    </script>
  </body>
</html>
